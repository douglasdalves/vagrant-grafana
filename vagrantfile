$script_inicial = <<-SCRIPT
    apt-get update && \
    sudo apt-get upgrade -y && \
    curl -fsSL https://get.docker.com -o get-docker.sh && \
	sudo sh get-docker.sh
SCRIPT

#--------------------------------------------------------------------------
#configuracao da mv e so
#--------------------------------------------------------------------------
Vagrant.configure("2") do |config|
	config.vm.box = "ubuntu/bionic64"
	
	config.vm.provider "virtualbox" do |vb|
		# Exibir a GUI do VirtualBox ao inicializar a máquina
		#vb.gui = true
		# Personalize a quantidade de memória na VM:
		vb.memory = "1024"
		vb.cpus = 1
	end
	
#--------------------------------------------------------------------------
#configuracao de rede
#--------------------------------------------------------------------------

	config.vm.define "docker" do |docker|
		docker.vm.network "private_network", ip: "192.168.33.10"
		docker.vm.network "public_network"
		
#--------------------------------------------------------------------------
###		personalizacao
#--------------------------------------------------------------------------

#### docker

		# docker.vm.provision "shell", inline: $script_inicial
		# docker.vm.provision "shell",
			# inline: "sudo usermod -aG docker vagrant && \
					  # sudo usermod -aG docker telegraf"

#### grafana

		# docker.vm.provision "shell",
			# inline: "mkdir -p volumes/grafana && \
					 # docker network create grafana-net && \
					 # ID=$(id -u) &&\
					 # docker run -d --user $ID -v /home/vagrant/volumes/grafana/:/var/lib/grafana -p 3000:3000 --name=grafana --network=grafana-net grafana/grafana"

#### influx - banco (TSBN)
		
		# docker.vm.provision "shell",
			# inline: "mkdir -p volumes/influxdb && \
					 # docker run -d -v /home/vagrant/volumes/influxdb/:/var/lib/influxdb -p 8083:8083 -p 8086:8086 -p 25826:25826/udp --name=influxdb --network=grafana-net influxdb:1.0"

#### telegraf
	#adicione o repositório InfluxData e instala
	
		# docker.vm.provision "shell",
			# inline: "wget -qO- https://repos.influxdata.com/influxdb.key | sudo apt-key add - && \
					 # source /etc/lsb-release && \
					 # echo deb https://repos.influxdata.com/${DISTRIB_ID,,} ${DISTRIB_CODENAME} stable | sudo tee /etc/apt/sources.list.d/influxdb.list && \
					 # sudo apt-get update && \
					 # sudo apt-get install apt-transport-https && \
					 # sudo apt-get update && sudo apt-get install telegraf"
					 
					#sudo service telegraf start

#### apache

		# docker.vm.provision "shell",
			# inline: "sudo apt-get install -y apache2 && \
					 # sudo usermod -aG adm telegraf"
					 
	end
  
end
